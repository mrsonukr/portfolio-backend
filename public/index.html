<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Repositories</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold text-center mb-6">My GitHub Repositories</h1>
    <div class="mb-4">
      <input id="username" type="text" placeholder="Enter GitHub username" class="border p-2 rounded w-full max-w-md mx-auto block">
      <button id="fetchRepos" class="mt-2 bg-blue-500 text-white p-2 rounded hover:bg-blue-600">Fetch Repositories</button>
    </div>
    <div id="repos" class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"></div>
  </div>
  <script>
    async function fetchRepos() {
      const username = document.getElementById('username').value.trim();
      if (!username) {
        alert('Please enter a GitHub username');
        return;
      }

      const reposContainer = document.getElementById('repos');
      reposContainer.innerHTML = '<p class="text-center">Loading...</p>';

      try {
        const response = await fetch(`https://your-worker-subdomain.workers.dev/api/repos/${username}`);
        if (!response.ok) {
          throw new Error('User not found or API error');
        }
        const repos = await response.json();

        if (repos.length === 0) {
          reposContainer.innerHTML = '<p class="text-center">No repositories with valid project.json found.</p>';
          return;
        }

        reposContainer.innerHTML = '';
        repos.forEach(repo => {
          const repoCard = document.createElement('div');
          repoCard.className = 'bg-white p-4 rounded shadow';
          repoCard.innerHTML = `
            <img src="${repo.banner}" alt="${repo.name} banner" class="w-full h-40 object-cover rounded mb-4">
            <h2 class="text-xl font-semibold">
              <a href="${repo.html_url}" target="_blank" class="text-blue-600 hover:underline">${repo.name}</a>
            </h2>
            <p class="text-gray-600 mb-2">${repo.description}</p>
            ${repo.demoLink ? `<a href="${repo.demoLink}" target="_blank" class="text-blue-500 hover:underline">Demo</a>` : '<p class="text-gray-500">No demo available</p>'}
          `;
          reposContainer.appendChild(repoCard);
        });
      } catch (error) {
        reposContainer.innerHTML = `<p class="text-center text-red-500">Error: ${error.message}</p>`;
      }
    }

    document.getElementById('fetchRepos').addEventListener('click', fetchRepos);
  </script>
</body>
</html>